# Dashboard Dataset Generation Scripts

This folder contains R scripts to generate all datasets required for the Desigualdad y Pobreza Dashboard.

## üìÅ Output Location

All generated datasets are saved to:
```
/Users/vero/Documents/Observatorio GH/Observatorio-Desigualdad-Pobreza/Dashboards/Data Final/
```

## üöÄ Quick Start

To generate all datasets, run the master script:

```r
source("00_MASTER_generate_all.R")
```

Or run individual scripts as needed.

## üìä Scripts Overview

### Poverty Datasets (ENEMDU)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **01_pobreza_educacion.R** | `pobreza_educacion.xlsx` | Poverty by education level (Superior vs No Superior) |
| **02_pobreza_edad.R** | `pobreza_edad.xlsx` | Poverty by age groups (Ni√±os, J√≥venes, Adultos, Adultos mayores) |
| **03_pobreza_region.R** | `pobreza_region.xlsx` | Poverty by region (Costa, Sierra, Oriente) |
| **04_pobreza_multidimensional.R** | `pobreza_multidimensional_scorecard.xlsx`<br>`pobreza_multidimensional_series.xlsx` | Multidimensional poverty indicators |
| **05_variacion_estadistica.R** | `variacion_pobreza_significancia.xlsx` | Year-over-year changes with statistical significance |

### Employment Datasets (ENEMDU + Toy Data)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **06_empleo_toy.R** | `empleo_scorecard.xlsx`<br>`empleo_series.xlsx`<br>`empleo_demografico.xlsx`<br>`iess_afiliados.xlsx` (toy)<br>`variacion_empleo_significancia.xlsx` | Employment indicators from ENEMDU<br>IESS affiliates uses toy data |

### Wage Datasets (ENEMDU)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **07_salarios_brechas_toy.R** | `salarios_series.xlsx`<br>`brechas_salariales.xlsx` (5 sheets) | Wage evolution and gaps by:<br>- Education<br>- Gender<br>- Gender + marital status<br>- Ethnicity<br>- Age |

### Growth Distribution (ENEMDU)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **08_distribucion_crecimiento.R** | `crecimiento_percentiles.xlsx`<br>`crecimiento_demografico.xlsx`<br>`crecimiento_empleo_sector.xlsx` | Growth incidence curves (GIC)<br>Income growth by demographics<br>Employment growth by economic sector |

### Inequality Datasets (WDI + Toy Data)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **09_desigualdad.R** | `gini_lac_comparison.xlsx`<br>`gini_tax_impact.xlsx` (toy)<br>`sri_percentiles_ingreso.xlsx` (toy)<br>`poblacion_percentiles.xlsx` (toy) | Gini comparison with LAC<br>Tax impact analysis<br>SRI income percentiles<br>Population by percentile |

### Taxation (Toy Data)

| Script | Output Files | Description |
|--------|--------------|-------------|
| **10_tributacion.R** | `tributacion_graficos.xlsx` | Tax revenue composition<br>Tax burden by income level<br>*Based on Bolet√≠n 1 graphs 16 & 17* |

## üì¶ Required R Packages

The scripts require the following R packages:

```r
install.packages(c("haven", "dplyr", "writexl", "tidyr", "Hmisc", "WDI"))
```

- **haven**: Read Stata .dta files
- **dplyr**: Data manipulation
- **writexl**: Write Excel files
- **tidyr**: Data reshaping
- **Hmisc**: Weighted statistics
- **WDI**: World Bank data download

## üìù Data Sources

### Real Data (from ENEMDU)
- Poverty indicators by demographics
- Employment indicators
- Wage levels and gaps
- Growth incidence curves
- Income distribution

### Toy Data (to be replaced)
- IESS affiliates time series
- Gini tax impact analysis
- SRI income percentiles
- Population by percentile
- Taxation graphs

### External Data
- Gini comparison with LAC countries (World Bank WDI)

## ‚ö†Ô∏è Important Notes

1. **ENEMDU Path**: Scripts read from merged ENEMDU files at:
   ```
   /Users/vero/Library/CloudStorage/GoogleDrive-.../ENEMDU - copia/Merged/
   ```

2. **Variable Names**: ENEMDU variable names may change across years. Scripts include common alternatives but may need adjustment.

3. **Toy Data**: Some datasets use synthetic data (marked as "toy"). Replace with real data when available:
   - IESS affiliates
   - SRI income percentiles
   - Tax impact analysis
   - Taxation graphs

4. **Methodology**: Growth incidence curves follow the methodology from `Bolet√≠n 1/Procesamiento/Codigos/GIC/`

## üîÑ Updating Data

To update datasets with latest ENEMDU data:

1. Ensure latest ENEMDU merged files are in the ENEMDU directory
2. Run the master script or individual scripts
3. Check the dashboard to verify new data displays correctly

## üìß Contact

For questions about these scripts, refer to the main project documentation.

---

**Last Updated**: 2026-02-22
**Generated by**: Claude + User
